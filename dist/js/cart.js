"use strict";function emptyCart(){console.log("empty"),$(".cart-items").attr("id","emptyCart"),$("<h1>").text("Opps! Looks like your cart is empty").addClass("cart-empty-h1").appendTo($(".cart-items")),$("<p>").html("You're only a few clicks away from a cozy evening!<br>Go back to our products page and fill your cart with some delicious candy!").addClass("cart-empty-p").appendTo($(".cart-items")),$("<a>").attr("href","./products.html").text("Products Page").addClass("cart-empty-btn").appendTo($(".cart-items")),$("<img>").attr("src","./../assets/empty-cart.svg").addClass("cart-empty-svg").appendTo($(".cart-items"))}$((function(){$("input").attr("required",!0),$(".checkout-container").hide();var t=[],a=sessionStorage.getItem(["cart"]);function e(t,a,e){return t.html("<p>".concat(e,"</p><p>").concat(a," SEK</p>"))}if(a||""===a){var i=function(){return t.reduce((function(t,a){return t+a}),0)},n=JSON.parse(sessionStorage.cart),r=$("<div>");r.addClass("wrapper").appendTo($(".cart-items")),$.each(n,(function(a,s){var o=$("<div>");o.addClass("cart-item-container").attr("id",s.id).appendTo(r),$("<img>").attr("src",s.image).addClass("cart-item-image").appendTo(o);var p=$("<div>");p.addClass("inner-div").appendTo(o),$("<h4>").text(s.name).addClass("cart-item-h").appendTo(p),$("<p>").text(s.description).addClass("cart-item-p").appendTo(p);var c=$("<div>");c.addClass("remove-icon-div").appendTo(p);var d=$("<a>");d.html("<i class='fas fa-dumpster'></i> Remove").addClass("remove-icon").appendTo(c).on("click",(function(){var a=d.parents(".cart-item-container"),e=s;a.attr("id")==e.id&&(n.splice(e,1),t.splice(e,1),a.addClass("deleted").on("animationend",(function(){a.remove(),$(".wrapper").children().length>=0&&($(".price-container").remove(),emptyCart(),sessionStorage.clear())})),sessionStorage.setItem(["cart"],JSON.stringify(n)),console.log(i()))}));var l=$("<p>");l.addClass("spinner-container").appendTo(c),$("<label>").attr("for","spinner").html('<i class="fas fa-sort-amount-up-alt"></i> Quantity: ').appendTo(l),$("<input>").attr("name","value").attr("min",1).attr("max",10).addClass("amount").appendTo(l).on("spinchange",(function(r){var o=parseInt(r.target.value);s.inCart=o;var p,c,d,l,m,u=$(this).closest($(".cart-item-container"));sessionStorage.setItem(["cart"],JSON.stringify(cart)),sessionStorage.setItem(["cart"],JSON.stringify(n)),p=u.children("p"),c=s.price,l=a,m=(d=o)*c,d<=0?p.html(c+"SEK"):(t[l]=m,p.html(m+"SEK"));var h=$(this).closest(".cart-items");e(h.find(".price-inner-div div:first-child"),i(),"Items in cart:"),e(h.find(".final-price"),i(),"Final price:")}));$(".amount").spinner();$("<p>").html("".concat(s.price*s.inCart,"SEK")).addClass("cart-item-p-price").appendTo(o),t.push(s.price)})),function(){var t=$("<div>");t.addClass("price-container").appendTo($(".cart-items"));var a=$("<div>");$("<h2>").text("Total price").appendTo(t),a.addClass("price-inner-div").appendTo(t),$("<div>").html("<p>Items in cart:</p><p>".concat(i()," SEK</p>")).appendTo(a),$("<div>").html('<p>Shipping and handling:</p><p class="free">FREE!</p>').appendTo(a),$("<div>").addClass("final-price").html("<p>Final price:</p><p>".concat(i()," SEK</p>")).appendTo(t),$("<a>").addClass("to-checkout-btn").html("Go to checkout").appendTo(t).one("click",(function(){$("footer").addClass("static-position"),$(".checkout-container").slideDown(),$("<img>").attr("src","./../assets/teamwork.svg").appendTo(".form-body"),console.log($(this)),$(this).animate({scrollTop:$("#scrollHere").offset().top},1500)}))}(),$(".submit").on("click",(function(){var t=$("<div>");t.attr("id","loadingContainer").html("<h1>Please wait while we process your payment!</h1>").appendTo("body"),$("<img>").attr("src","./../assets/loading-icon.svg").attr("id","loadingImg").appendTo(t),setTimeout((function(){t.remove(),window.open("./../html/orderConfirmation.html")}),5e3)}))}else emptyCart()}));