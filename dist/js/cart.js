"use strict";function emptyCart(){console.log("empty"),$(".cart-items").attr("id","emptyCart"),$("<h1>").text("Opps! Looks like your cart is empty").addClass("cart-empty-h1").appendTo($(".cart-items")),$("<p>").html("You're only a few clicks away from a cozy evening!<br>Go back to our products page and fill your cart with some delicious candy!").addClass("cart-empty-p").appendTo($(".cart-items")),$("<a>").attr("href","./products.html").text("Products Page").addClass("cart-empty-btn").appendTo($(".cart-items")),$("<img>").attr("src","./../assets/empty-cart.svg").addClass("cart-empty-svg").appendTo($(".cart-items"))}$((function(){$(".checkout-container").hide();var a=[],t=sessionStorage.getItem(["cart"]);function e(a,t,e){return a.html("<p>".concat(e,"</p><p>").concat(t," SEK</p>"))}if(t||""===t){var i=function(){return a.reduce((function(a,t){return a+t}),0)},n=JSON.parse(sessionStorage.cart),r=$("<div>");r.addClass("wrapper").appendTo($(".cart-items")),$.each(n,(function(t,s){var o=$("<div>");o.addClass("cart-item-container").attr("id",s.id).appendTo(r),$("<img>").attr("src",s.image).addClass("cart-item-image").appendTo(o);var p=$("<div>");p.addClass("inner-div").appendTo(o),$("<h4>").text(s.name).addClass("cart-item-h").appendTo(p),$("<p>").text(s.description).addClass("cart-item-p").appendTo(p);var c=$("<div>");c.addClass("remove-icon-div").appendTo(p);var d=$("<a>");d.html("<i class='fas fa-dumpster'></i> Remove").addClass("remove-icon").appendTo(c).on("click",(function(){var t=d.parents(".cart-item-container"),e=s;t.attr("id")==e.id&&(n.splice(e,1),a.splice(e,1),t.addClass("deleted").on("animationend",(function(){t.remove(),$(".wrapper").children().length>=0&&($(".price-container").remove(),emptyCart(),sessionStorage.clear())})),sessionStorage.setItem(["cart"],JSON.stringify(n)),console.log(i()))}));var l=$("<p>");l.addClass("spinner-container").appendTo(c),$("<label>").attr("for","spinner").html('<i class="fas fa-sort-amount-up-alt"></i> Quantity: ').appendTo(l),$("<input>").attr("name","value").attr("min",1).attr("max",10).addClass("amount").appendTo(l).on("spinchange",(function(r){var o=parseInt(r.target.value);s.inCart=o;var p,c,d,l,m,u=$(this).closest($(".cart-item-container"));sessionStorage.setItem(["cart"],JSON.stringify(cart)),sessionStorage.setItem(["cart"],JSON.stringify(n)),p=u.children("p"),c=s.price,l=t,m=(d=o)*c,d<=0?p.html(c+"SEK"):(a[l]=m,p.html(m+"SEK"));var v=$(this).closest(".cart-items");e(v.find(".price-inner-div div:first-child"),i(),"Items in cart:"),e(v.find(".final-price"),i(),"Final price:")}));$(".amount").spinner();$("<p>").html("".concat(s.price*s.inCart,"SEK")).addClass("cart-item-p-price").appendTo(o),a.push(s.price)})),function(){var a=$("<div>");a.addClass("price-container").appendTo($(".cart-items"));var t=$("<div>");$("<h2>").text("Total price").appendTo(a),t.addClass("price-inner-div").appendTo(a),$("<div>").html("<p>Items in cart:</p><p>".concat(i()," SEK</p>")).appendTo(t),$("<div>").html('<p>Shipping and handling:</p><p class="free">FREE!</p>').appendTo(t),$("<div>").addClass("final-price").html("<p>Final price:</p><p>".concat(i()," SEK</p>")).appendTo(a),$("<a>").addClass("to-checkout-btn").html("Go to checkout").appendTo(a).one("click",(function(){$(".checkout-container").slideDown(),$("<img>").attr("src","./../assets/teamwork.svg").appendTo(".form-body")}))}(),$(".submit").on("click",(function(){var a=$("<div>");a.attr("id","loadingContainer").html("<h1>Please wait while we process your payment!</h1>").appendTo("body"),$("<img>").attr("src","./../assets/loading-icon.svg").attr("id","loadingImg").appendTo(a),setTimeout((function(){a.remove()}),5e3)}))}else emptyCart()}));